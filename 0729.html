第十一届全国大学生光电设计竞赛（东南赛区）
技术方案报告




编    号：（由组委会填写）
参赛题目：1. 酒精浓度的非接触测量
2. “迷宫寻宝”光电智能小车


参赛队名：碰碰车队
所在学校：深圳大学
指导教师：李晓宇
参赛队员：黄璐露、曹婉楠、秦阳




第十一届全国大学生光电设计竞赛东南部区组委会制
二〇二三年六月

参赛题目：“迷宫寻宝”光电智能小车
一. 研究目标
本项目的研究目标是设计和开发一款迷宫寻宝光电智能小车，能够通过光电传感技术自主导航并解决迷宫中的寻宝任务。该智能小车将能够根据藏宝图识别迷宫的结构，使用A^*最短路算法进行路径规划，避开障碍物并以最优的方式找到宝藏，然后综合运用图像识别的技术成功完成寻宝任务。
我们将其主要分为四个模块，分别为：车辆运动控制、路径规划、藏宝图识别与宝藏识别。
二. 研究方案
1. 车辆运动控制
我们设计并实施了一种基于红外循迹传感器和麦克纳姆轮的复杂车辆控制系统。此系统具备高度的精确性和自适应性，能够有效地控制车辆的移动和导向。
该系统主要由两个部分构成：红外循迹传感器和麦克纳姆轮。红外循迹传感器负责实时检测并接收路线信息，它可以读取黑线上的红外反射率，然后将其转换为数字信号输出给微控制器。这种机制使得车辆可以进行精确的线路跟踪，实现自动驾驶。 
麦克纳姆轮则是控制系统的执行部分。麦克纳姆轮是一种特殊的全向轮，它的轮轴是斜装的。通过改变各个轮子的旋转方向和速度，车辆可以在无需改变车身方向的情况下实现前后左右和斜向的运动。配合红外循迹传感器的路线信息，麦克纳姆轮能够实现对车辆精确的、灵活的控制，满足各种复杂路线的驾驶需求。 
在上述两部分的协同作用下，系统能够实现自动、快速和准确地沿着既定路线移动，尤其适合于需要精确驾驶和复杂路线导航的场景。
在代码中，首先通过调用红外传感器的相关函数读取路线信息，然后根据读取到的信息对麦克纳姆轮进行控制，以使车辆按照既定路线移动。具体的控制逻辑如下：
当红外循迹传感器检测到车辆偏离路线时，将生成对应的信号，并发送给微控制器。微控制器接收到这个信号后，根据信号的具体信息，调整麦克纳姆轮的运动方向，使车辆重新回到正确的路线上。
例如，如果传感器检测到车辆偏向左边，那么微控制器会控制麦克纳姆轮向右偏移，反之亦然。如果车辆完全偏离了路线，微控制器会根据传感器的信号调整麦克纳姆轮的运动，使车辆重新找到路线。
当车辆在正确的路线上移动时，传感器将不会生成任何信号，麦克纳姆轮将继续按照当前的运动方向和速度进行运动。
这种控制逻辑确保了车辆能够准确、稳定地沿着既定路线进行移动，大大提高了自动导航的精度和效率。
2. 路径规划
本项目采用了高效的A^*路径规划算法，并对此进行了深度优化，以确保小车能在最短时间内找到目标点。我们特别利用了宝藏的对称分布特性，实现了对寻宝路径的动态规划，从而优化了搜索过程。
在具体操作中，当我们成功识别出我方宝藏或伪宝藏的位置时，可以据此确定地图上对称位置为对方宝藏及伪宝藏的所在。这样，我们便能通过对称性的引导，预判并优化搜索路径。这种对称性策略的运用，使得我们可以显著减少需要搜索的节点数量，从而大幅提升了路径规划的效率。
通过这种灵活和高效的路径规划策略，我们能够确保智能小车在最短的时间内、最有效率的方式下找到宝藏，显著提升了寻宝任务的成功率和执行效率。这一切，都彰显了我们项目中对算法优化和动态规划策略应用的深度掌握和独到见解。
3. 藏宝图识别
在本项目中，我们采用了一系列先进的图像处理技术，确保地图生成的准确性和效率。初始步骤包括对获取的彩色图片进行二值化处理，此举旨在简化图像信息，提高处理效率。
在二值化处理之后，我们进一步去除图像周围的黑色边缘，这是为了减少潜在的图像处理干扰，确保后续步骤的准确性。这个阶段的操作对于整个图像处理流程的成功与否至关重要。
接下来，我们找出图像中的定位点，利用这些点进行透视矫正。透视矫正的过程可以有效地消除图像因拍摄角度产生的形变，从而使得处理后的图像更加接近真实世界的情况。
在完成上述步骤后，我们将图像切割成20*20的格子，这是为了更好地适应我们的路径规划算法和控制策略。切割后的每个格子都代表了地图上的一个特定区域，这样可以使得我们的小车更精确地定位和导航。
最后，我们将处理和切割后的图像压缩成一个0-1地图。这个地图将直观地表示出地图上可行走的区域和不可行走的区域，从而为我们的小车提供了清晰、精确的导航数据。
通过以上这一系列的精确操作和处理，我们成功地将复杂的图像数据转化为了可供智能小车使用的地图信息，从而保证了小车能够准确、高效地执行寻宝任务。
4. 宝藏识别
本项目将采用先进的图像处理和颜色识别技术，以实现宝藏的准确识别和分类。首先，我们利用摄像头捕获实时图像，通过将这些图像从RGB颜色空间转换为HSV颜色空间，我们能更为精准地分析和处理图像数据。接着，我们对转换后的图像进行阈值处理，从而得到二值图像，这是对图像进行进一步处理的关键步骤。
在得到二值图像后，我们采用形态学处理方法，对图像进行膨胀操作，这样能有效地增大宝藏区域的大小，使得宝藏在图像中的特征更为明显，便于后续识别操作。
然后，我们将对HSV颜色空间图像中的色调分量进行阈值判断，统计各个像素点在不同颜色范围内的个数，如绿色、黄色、红色、蓝色等。此步骤通过细致的颜色统计，可以实现对宝藏颜色的精确分类和识别。
通过这种综合使用图像处理和颜色识别技术的方法，我们能确保准确地识别并分类出图像中的宝藏，大大提升寻宝任务的效率和准确性。
三. 技术路线及可行性分析
1. 红外避障传感器与数据采集
小车搭载红外避障传感器，用于探测迷宫中的障碍物，如墙壁或障碍物。红外避障传感器能够发射红外光，并测量返回的反射信号强度，从而判断周围环境是否有障碍物。通过传感器获取的数据，小车可以实时感知障碍物的位置和距离。
2. 宝藏识别与路径规划
小车还需要进行宝藏识别，即利用Matlab的视觉库以及其他图像处理技术，识别迷宫中的多米诺骨牌或目标物体。然后，结合藏宝图的路线进行路径规划，确保小车朝向宝藏前进。类似之前描述的技术路线，小车能够根据宝藏识别的结果，不断进行决策和调整运动策略，以适应复杂的迷宫环境和实际情况。
3. 可行性分析 
在技术可行的前提下，最终的成功与否还需要考虑系统的实际实用性。因此，我们团队在开发过程中进行了多次实验和测试，通过不断的调整参数，最终确保小车能够在迷宫中可靠地完成寻宝任务。
四. 解决的关键问题
藏宝图识别问题
结合了计算机视觉技术和图像处理算法。我们先使用图像处理技术对传感器获取的图像进行预处理，对图像去除噪声和干扰；然后我们采用了图像特征提取方法，如边缘检测等，最后进行透视矫正，来识别藏宝图或目标图案。并且我们成功与其他功能模块相结合，如路径规划、避障策略和速度控制等。当识别到藏宝图后，小车能够相应地调整路径规划，确保能够顺利到达目标位置。
五. 特色与创新点
1. 高效的路径规划算法
使用了A^*路径规划算法，并且对寻路进行了优化，由于宝藏是对称分布，当识别到了我方宝藏时，可以确认地图的对称位置为对方宝藏，重新规划路径，确保小车能够在更短时间内找到目标点。
2. 优化的低成本循迹算法
经过优化的循迹算法，只使用两个循迹传感器，配合上先进的运动控制算法，实现稳定的循迹
3. 实时环境感知 
使用光电传感技术，小车可以实时感知环境，避开障碍物，适应复杂多变的迷宫结构。
六. 其他说明
本项目采用模块化开发，分阶段实现不同功能模块，并进行逐步集成测试，降低项目开发的风险。系统的安全性是一个重要考量因素，在设计中将考虑保护措施，避免小车发生碰撞或出现其他异常情况。
七. 结论
本迷宫寻宝光电智能小车技术方案旨在设计一种具有自主导航和智能决策能力的小车，以解决迷宫寻宝任务。通过光电传感技术与智能算法的结合，该小车能够高效地找到目标，具备一定的应用前景。然而，在实际开发过程中，还需要进一步完善和优化各个技术模块，以实现更稳定、高效、安全的小车设计。
